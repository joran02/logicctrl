#include "cmn.h"

U8 tEEPROM[0x700] =
{
//  0    1    2    3     4    5    6    7     8    9    a    b     c    d    e    f
	0x00,0x2F,0x0B,0x02, 0x19,0x08,0x09,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //00		//RTC
	0x00,0x01,0x02,0x01, 0x01,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //01		//SYSTEM
	0x20,0x30,0x31,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  //02		//CAMERA1
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	//03
	0x20,0x30,0x32,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  //04		//CAMERA2
	0x00,0x00,0x00,0x00, 0x00,0x20,0x30,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	//05
	0x20,0x30,0x33,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  //06		//CAMERA3
	0x00,0x00,0x00,0x00, 0x00,0x20,0x30,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	//07
	0x20,0x30,0x34,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  //08		//CAMERA4
	0x00,0x00,0x00,0x00, 0x00,0x20,0x30,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	//09
	0x20,0x30,0x35,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  //0a		//CAMERA5
	0x00,0x00,0x00,0x00, 0x00,0x20,0x30,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	//0b
	0x20,0x30,0x36,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  //0c		//CAMERA6
	0x00,0x00,0x00,0x00, 0x00,0x20,0x30,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	//0d
	0x20,0x30,0x37,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  //0e		//CAMERA7
	0x00,0x00,0x00,0x00, 0x00,0x20,0x30,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	//0f
	
	0x20,0x30,0x38,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  //10		//CAMERA8
	0x00,0x00,0x00,0x00, 0x00,0x20,0x30,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	//11
	0x20,0x30,0x39,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  //12		//CAMERA9
	0x00,0x00,0x00,0x00, 0x00,0x20,0x30,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	//13
	0x20,0x31,0x30,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  //14		//CAMERA10
	0x00,0x00,0x00,0x00, 0x00,0x20,0x30,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	//15
	0x20,0x31,0x31,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  //16		//CAMERA11
	0x00,0x00,0x00,0x00, 0x00,0x20,0x30,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	//17
	0x20,0x31,0x32,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  //18		//CAMERA12
	0x00,0x00,0x00,0x00, 0x00,0x20,0x30,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	//19
	0x20,0x31,0x33,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  // 1a	//CAMERA13
	0x00,0x00,0x00,0x00, 0x00,0x20,0x30,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 1b
	0x20,0x31,0x34,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  // 1c		//CAMERA14
	0x00,0x00,0x00,0x00, 0x00,0x20,0x30,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 1d
	0x20,0x31,0x35,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  // 1e	//CAMERA15
	0x00,0x00,0x00,0x00, 0x00,0x20,0x30,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 1f
	
	0x20,0x31,0x36,0x20, 0x20,0x32,0x32,0x32, 0x32,0x00,0x01,0x10, 0x05,0x00,0x00,0x00,  // 20	//CAMERA16
	0x00,0x00,0x00,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 21
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 22	//MOTION1
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 23	//MOTION2
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 24	//MOTION3
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 25	//MOTION4
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 26	//MOTION5
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 27	//MOTION6
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 28	//MOTION7
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 29	//MOTION8
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 2a	//MOTION9
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 2b	//MOTION10
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 2c		//MOTION11
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 2d	//MOTION12
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 2e	//MOTION13
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 2f		//MOTION14
	
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 30	//MOTION15
	0x06,0x00,0x0F,0x01, 0x4F,0x00,0x0F,0x00, 0xE6,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 31	//MOTION16
	0x00,0x00,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 32	//PTZ1
	0x00,0x01,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 33	//PTZ2
	0x00,0x02,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 34	//PTZ3
	0x00,0x03,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 35	//PTZ4
	0x00,0x04,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 36	//PTZ5
	0x00,0x05,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 37	//PTZ6
	0x00,0x06,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 38	//PTZ7
	0x00,0x07,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 39	//PTZ8
	0x00,0x08,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 3a	//PTZ9
	0x00,0x09,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 3b	//PTZ10
	0x00,0x0a,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 3c		//PTZ11
	0x00,0x0b,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 3d	//PTZ12
	0x00,0x0c,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 3e	//PTZ13
	0x00,0x0d,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 3f		//PTZ14
	
	0x00,0x0e,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 40	//PTZ15
	0x00,0x0f,0x00,0x10, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 41	//PTZ16
	0x00, 192 ,168,  1,        27,    192,  168,  1,     1,      255,  255,  255,  0,   202,  96,   134,  	// 42	//NET
	133,202, 96,    128,     166, 0x1a,0x92,0x00,  0x50,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 43	
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  // 44
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 45	//RECORD1
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 46	//RECORD2
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 47	//RECORD3
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 48	//RECORD4
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 49	//RECORD5
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 4a	//RECORD6
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 4b	//RECORD7
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 4c		//RECORD8
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 4d	//RECORD9
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 4e	//RECORD10
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 4f		//RECORD11
	
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 50	//RECORD12
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 51	//RECORD13
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 52	//RECORD14
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 53	//RECORD15
	0x00,0x02,0x0e,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,	// 54	//RECORD16
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x01, 0x01,0x01,0x01,0x01, 0x01,0x01,0x01,0x01,  // 55	//USER1
	0x41,0x44,0x4d,0x49, 0x4e,0x30,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  // 56
	0x01,0x01,0x01,0x01, 0x01,0x01,0x01,0x00, 0x00,0x00,0x01,0x00, 0x00,0x00,0x00,0x00,  // 57	//USER2
	0x55,0x53,0x45,0x52, 0x30,0x31,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  // 58
	0x02,0x02,0x02,0x02, 0x02,0x02,0x02,0x00, 0x00,0x00,0x01,0x00, 0x00,0x00,0x00,0x00,  // 59	//USER3
	0x55,0x53,0x45,0x52, 0x30,0x32,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  // 5a
	0x03,0x03,0x03,0x03, 0x03,0x03,0x03,0x00, 0x00,0x00,0x01,0x00, 0x00,0x00,0x00,0x00,  // 5b	//USER4
	0x55,0x53,0x45,0x52, 0x30,0x33,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //5c
	0x01,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //5d		//HDD
	0x0a,0x00,0x19,0x73, 0x6d,0x74,0x70,0x2e, 0x31,0x36,0x33,0x2e, 0x63,0x6f,0x6d,0x00,  //5e
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //5f
	
	0x00,0x6e,0x76,0x72, 0x6d,0x61,0x69,0x6c, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //60
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x6e,  //61
	0x76,0x72,0x6d,0x61, 0x69,0x6c,0x21,0x40, 0x23,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //62
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x78,0x78,0x78,  //63
	0x78,0x78,0x78,0x40, 0x31,0x36,0x33,0x2e, 0x63,0x6f,0x6d,0x00, 0x00,0x00,0x00,0x00,  //64
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //65
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //66
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //67
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //68
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //69
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //6a
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //6b
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //6c
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //6d
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //6e
	0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00, 0x00,0x00,0x00,0x00,  //6f

};

static FILE  * eprom_file = NULL;

pthread_mutex_t eprom_file_edit_lock;
int eprom_file_edit_flag=0;

int  EpRomFileOpen()
{
	eprom_file = fopen("/mnt/mtd/menu.data","r+b");
	if( eprom_file == NULL )
	{
//		printf("*************************No File*********************************\n");
		eprom_file = fopen("/mnt/mtd/menu.data","wb");
		if( eprom_file == NULL )
		{
			return -1;
		}
		else
		{
			return 2;
		}
	}
	return 1;
}

void EpRomFileClose()
{
	if( eprom_file )
	{
		fclose(eprom_file);
		eprom_file = NULL;
	}
}

int EpRomFileWrite(U8* ptr,U16 addr,U16 num)
{
	int ret = 0;
	
	
	ret = EpRomFileOpen();

	if( ret > 0 )
	{
		rewind(eprom_file);
		if (addr)
			fseek(eprom_file,addr,SEEK_SET);
		ret = fwrite(ptr,1,num,eprom_file);
		if( ret != num)
		{
			printf(" epprom data write error!\n");
			return -1;
		}

		EpRomFileClose();
		
		pthread_mutex_lock(&eprom_file_edit_lock);
		eprom_file_edit_flag=1;
		pthread_mutex_unlock(&eprom_file_edit_lock);
		
		return 1;
	}
	else
	{
		printf("open eprom_file fail \n");
		return -1;
	}
}

int  EpRomFileRead(U8* ptr,U16 addr,U16 num)
{
	int ret = 0;

	ret = EpRomFileOpen();

	if( ret == 1 )
	{
		rewind(eprom_file);
		if (addr)
			fseek(eprom_file,addr,SEEK_SET);
		ret = fread(ptr,1,num,eprom_file);
		if( ret != num)
		{
			printf(" epprom data read error!\n");
			return -1;
		}

		EpRomFileClose();

		return 1;
	}else if (ret == 2)
	{
		printf("EpRomFileRead fail and InitE2Prom \n");
		EpRomFileWrite(tEEPROM,0,sizeof(tEEPROM));
		return ret;
	}
	else
		return ret;
}


void I_read_byte_eeprom(U16 sub_addr,U8 *ptr)
{
	EpRomFileRead(ptr,sub_addr,1);
}

void I_write_byte_eeprom(U16 sub_addr,U8 val)
{
	EpRomFileWrite(&val,sub_addr,1);
}

void I_read_block_eeprom(U16 sub_addr,U16 data_num,U8 *ptr)
{
	EpRomFileRead(ptr,sub_addr,data_num);
}

void I_write_block_eeprom(U16 sub_addr,U16 data_num,U8 *ptr)
{
	EpRomFileWrite(ptr,sub_addr,data_num);
}


void InitE2Prom()
{
	int i,ret=0;
	U8 tmp=0;
		
	ret = access("/mnt/mtd/menu.data",F_OK);
	
	if (ret==0)
	{
		return;
	}
	
//	pstCommonParam->gst_ext_write_rtc(0,ADDDISPMODE,1,&tEEPROM[ADDSYS+HDOUTPUT]);
//	pstCommonParam->gst_ext_write_rtc(0,ADDVIDEO,1,&tEEPROM[ADDSYS+VIDEOFORMAT]);
//	pstCommonParam->gst_ext_write_rtc(0,RTC_RAM_SPOT_FLAG_ADDR,1,&tmp1);
//	pstCommonParam->gst_ext_write_rtc(0,eINITIAL,1,&tmp);
	EpRomFileWrite(tEEPROM,0,sizeof(tEEPROM));
//	gstCommonParam->GST_DRA_Net_cam_mtd_store();
	RTCInit();
	
	for (i=0;i<4;i++)
	{
		I_read_block_eeprom(ADDPAS+ADDCOUNTPAS*i,sizeof(menupass[i]),&menupass[i].UserId);
	}
	
	for (i=0;i<17;i++)
	{
		I_read_block_eeprom(ADDRECAM+ADDCOUNTRECCAM*i,sizeof(RecamMenu[i]),&RecamMenu[i].Reselution);
		RecamMenu[i].Reselution = 1;
		I_write_block_eeprom(ADDRECAM+ADDCOUNTRECCAM*i,sizeof(RecamMenu[i]),&RecamMenu[i].Reselution);
	}
	
	menupass[0].UserName[0]='A';
	menupass[0].UserName[1]='D';
	menupass[0].UserName[2]='M';
	menupass[0].UserName[3]='I';
	menupass[0].UserName[4]='N';
	menupass[0].UserName[5]='0';
	menupass[0].Password[0]=0;
	menupass[0].Password[1]=0;
	menupass[0].Password[2]=0;
	menupass[0].Password[3]=0;
	menupass[0].Password[4]=0;
	menupass[0].Password[5]=0;		
	
	for (i=0;i<4;i++)
	{
		I_write_block_eeprom(ADDPAS+ADDCOUNTPAS*i,sizeof(menupass[i]),&menupass[i].UserId);
	}
	
}

